# SleepInsight - Система анализа электрокортикограмм

## Описание проекта

SleepInsight - это комплексная система для анализа электрокортикограмм (ЭКоГ), состоящая из нескольких модулей:

### Модули системы

#### 1. Frontend (app/web)

- Веб-интерфейс на Vue 3 + TypeScript
- Использует NaiveUI для компонентов интерфейса
- Позволяет загружать файлы ЭКоГ и просматривать результаты анализа
- Включает визуализацию данных с помощью Chart.js

#### 2. Backend (app/service)

- REST API на Express + TypeScript
- Обрабатывает загрузку файлов
- Управляет очередью задач
- Взаимодействует с ML-сервисом
- Генерирует отчеты в формате Excel

#### 3. ML Service (mlservice)

- Flask-приложение для машинного обучения
- Использует модель CatBoost для классификации участков ЭКоГ
- Выделяет следующие паттерны:
    - ds
    - is
    - swd
- Особенности ML модуля:
    - Использует скользящее окно для анализа сигнала
    - Извлекает статистические и частотные характеристики
    - Обеспечивает вероятностную оценку классификации

#### 4. Desktop Client (app/winapp)

- Windows-приложение на C# WinForms
- Упрощает загрузку файлов для анализа
- Предоставляет доступ к результатам через веб-интерфейс

## Запуск приложения

### Через Docker Compose

1. Убедитесь, что установлен Docker и Docker Compose
2. Склонируйте репозиторий
3. Выполните сборку образов:
   ```bash
   make build-all
   ```

4. Запустите систему:
   ```bash
   docker-compose up -d
   ```

Сервисы будут доступны по следующим портам:

- Frontend: http://localhost:5000
- Backend API: http://localhost:3002
- ML Service: http://localhost:5001
- MongoDB Express: http://localhost:8081

### Локальный запуск для разработки

#### Frontend

```bash
cd app/web
npm install
npm run dev
```

#### Backend

```bash
cd app/service
npm install
npm run dev
```

#### ML Service

```bash
cd mlservice
pip install -r requirements.txt
python wsgi.py
```

## ML модуль подробнее

ML модуль построен на основе градиентного бустинга (CatBoost) и использует следующие техники:

1. Предобработка данных:

- Сегментация сигнала скользящим окном
- Извлечение статистических характеристик (среднее, медиана, стандартное отклонение и др.)
- Частотный анализ с помощью FFT

2. Особенности модели:

- Мультиклассовая классификация (4 класса)
- Использование вероятностных оценок для определения уверенности классификации
- Агрегация предсказаний по временным окнам

3. Обучение модели:

- Использование размеченного датасета с экспертной разметкой
- Аугментация данных для баланса классов
- Валидация на отложенной выборке